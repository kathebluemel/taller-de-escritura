<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>SeÃ±o Bluemel â€“ Taller de Escritura</title>

  <!-- React 18 -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <!-- Babel (JSX in-browser) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Tailwind CSS (play CDN â€“ full utilities) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,sans-serif}
    @keyframes spin{to{transform:rotate(360deg)}}
    .animate-spin{animation:spin 1s linear infinite;display:inline-block}
    textarea{font-family:inherit}
  </style>
</head>

<body>
<div id="root"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     âš ï¸  TEACHER SETUP (read before publishing!)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     OPTION A â€” Hard-code your Anthropic API key below so
     students never see a setup screen.  Replace the empty
     string with your key (starts with  sk-ant-...).

     OPTION B â€” Leave TEACHER_API_KEY = "" and a one-time
     setup prompt will appear the first time anyone opens the
     page on each device.  The key is saved in localStorage so
     students only enter it once.

     âš ï¸  Your key IS visible in the page source.  Do not share
     the key publicly.  Consider creating a low-spend-limit key
     at console.anthropic.com just for this class.
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<script type="text/babel">
// â”€â”€ Teacher config â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const TEACHER_API_KEY = ""; // â† paste sk-ant-... here (optional)

// â”€â”€ Data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const SPECIAL_CHARS = [
  {c:'Ã¡'},{c:'Ã©'},{c:'Ã­'},{c:'Ã³'},{c:'Ãº'},
  {c:'Ã¼'},{c:'Ã±'},{c:'Ã'},{c:'Ã‰'},{c:'Ã'},
  {c:'Ã“'},{c:'Ãš'},{c:'Ã‘'},{c:'Â¿'},{c:'Â¡'},
];

const LEVELS = {
  noviceLow:{
    id:'noviceLow',label:'Novice Low',emoji:'ğŸŒ±',target:'3â€“10 words',
    color:'green',tagline:'Individual words & memorized phrases',
    guidelines:[
      'Write single words or very short memorized phrases',
      'Lists of vocabulary words are perfect at this level',
      'Use words you have already learned in class',
      'Aim for 3â€“10 words total â€” quality over quantity!',
    ],
    starters:['Me llamoâ€¦','Soy deâ€¦','Me gustaâ€¦','Tengoâ€¦','Mi â€¦ esâ€¦'],
  },
  noviceMid:{
    id:'noviceMid',label:'Novice Mid',emoji:'ğŸŒ¿',target:'15â€“40 words',
    color:'teal',tagline:'Simple phrases & short sentences',
    guidelines:[
      'Write 2â€“5 short, simple sentences using familiar patterns',
      'Connect ideas with: y (and), pero (but), tambiÃ©n (also), porque (because)',
      'Use sentence starters from class â€” they are your building blocks!',
      'Aim for 15â€“40 words total',
    ],
    starters:['Me llamo â€¦ y soy deâ€¦','En mi familia hayâ€¦','Me gusta â€¦ porqueâ€¦','Todos los dÃ­as yoâ€¦','Mi favorito/a esâ€¦'],
  },
};

const UNITS = {
  identity:   {label:'Identity & Greetings',emoji:'ğŸ‘‹'},
  family:     {label:'Family & Friends',emoji:'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦'},
  school:     {label:'School Life',emoji:'ğŸ«'},
  food:       {label:'Food & Drink',emoji:'ğŸ½ï¸'},
  home:       {label:'Home & Community',emoji:'ğŸ¡'},
  body:       {label:'Body & Health',emoji:'ğŸ’ª'},
  leisure:    {label:'Leisure & Culture',emoji:'âš½'},
  nature:     {label:'Nature & Time',emoji:'ğŸŒ¦ï¸'},
  travel:     {label:'Travel & Places',emoji:'âœˆï¸'},
  technology: {label:'Technology & Media',emoji:'ğŸ“±'},
};

const PROMPTS = [
  // â”€â”€ NOVICE LOW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {id:1,level:'noviceLow',unit:'identity',emoji:'ğŸ‘‹',
   title:'Â¡Hola! â€” Greetings & Introductions',
   culturalTheme:'The Art of Greeting in the Spanish-Speaking World',
   culturalFact:'In Spanish-speaking cultures, greetings are warm and personal. People say "buenos dÃ­as" â˜€ï¸ (good morning), "buenas tardes" ğŸŒ¤ï¸ (good afternoon), or "buenas noches" ğŸŒ™ (good evening). In many Latin American countries, it is polite to greet every single person when entering a room â€” even strangers! Friends often greet each other with a kiss on the cheek. ğŸ‡²ğŸ‡½ğŸ‡¨ğŸ‡´ğŸ‡¦ğŸ‡·ğŸ‡ªğŸ‡¸',
   culturalRegion:'Latin America & Spain',
   writingTask:'Write your name, where you are from, and how old you are.',
   scaffolding:[
     {phrase:'Me llamo ___',meaning:'My name is ___'},
     {phrase:'Soy de ___',meaning:'I am from ___'},
     {phrase:'Tengo ___ aÃ±os',meaning:'I am ___ years old'},
     {phrase:'Mucho gusto',meaning:'Nice to meet you'},
   ],
   example:'Hola. Me llamo Carlos. Soy de Texas. Tengo catorce aÃ±os.',
   grammarTip:'ğŸ’¡ Names of languages and nationalities (espaÃ±ol, americano) do NOT get a capital letter in Spanish. But names of people and places DO: Carlos, Texas.',
  },
  {id:2,level:'noviceLow',unit:'family',emoji:'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',
   title:'Mi Familia â€” My Family',
   culturalTheme:'La Familia â€” Heart of Latin American Life',
   culturalFact:'Family is everything in most Spanish-speaking cultures. Extended family â€” grandparents, aunts, uncles, cousins â€” often live together or very close by. In Mexico and Colombia, Sunday family meals are a sacred tradition ğŸ½ï¸. In many homes, grandparents (los abuelos) play a huge role in raising children. The word for family gathering, "reuniÃ³n familiar," happens far more often than in many other cultures!',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡¨ğŸ‡´ Colombia Â· ğŸ‡ªğŸ‡¸ Spain',
   writingTask:'Write the names of 3â€“5 family members and their relationship to you.',
   scaffolding:[
     {phrase:'Mi madre se llama ___',meaning:"My mother's name is ___"},
     {phrase:'Mi padre se llama ___',meaning:"My father's name is ___"},
     {phrase:'Mi hermano / hermana',meaning:'My brother / sister'},
     {phrase:'Mi abuela / abuelo',meaning:'My grandmother / grandfather'},
     {phrase:'Tengo ___ hermanos',meaning:'I have ___ siblings'},
   ],
   example:'Mi madre se llama Rosa. Mi padre se llama Juan. Tengo dos hermanos.',
   grammarTip:'ğŸ’¡ "Mi" = my (singular). Mi madre, mi padre. Use "mis" for plural things: mis hermanos = my siblings.',
  },
  {id:3,level:'noviceLow',unit:'food',emoji:'ğŸ½ï¸',
   title:'La Comida â€” Foods I Like',
   culturalTheme:'A Feast of Flavors Across the Spanish-Speaking World',
   culturalFact:'Food is culture! ğŸŒ® Mexico is famous for tacos, tamales, and mole. ğŸ¥˜ Spain has paella â€” saffron rice with seafood. ğŸ‹ Peru is known for ceviche. ğŸ¥© Argentina loves asado (barbecue). Every country in the Spanish-speaking world has its own delicious traditions passed down through generations!',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡µğŸ‡ª Peru Â· ğŸ‡¦ğŸ‡· Argentina Â· ğŸ‡ªğŸ‡¸ Spain',
   writingTask:'Write 3â€“5 foods you like and 1â€“2 you do not like.',
   scaffolding:[
     {phrase:'Me gusta ___',meaning:'I like ___ (singular)'},
     {phrase:'Me gustan los/las ___',meaning:'I like ___ (plural)'},
     {phrase:'No me gusta ___',meaning:"I don't like ___"},
     {phrase:'Mi comida favorita es ___',meaning:'My favorite food is ___'},
   ],
   example:'Me gusta el pollo. Me gustan los tacos. No me gusta el pescado. Mi comida favorita es la pizza.',
   grammarTip:'ğŸ’¡ Use "me gusta" + singular: me gusta el arroz. Use "me gustan" + plural: me gustan los tacos.',
  },
  {id:4,level:'noviceLow',unit:'nature',emoji:'ğŸ“…',
   title:'Los DÃ­as y Los Meses â€” Days, Months & Dates',
   culturalTheme:'How Spanish Speakers Mark Time',
   culturalFact:'ğŸ“… In most Spanish-speaking countries, calendars start on MONDAY, not Sunday! Days of the week are NOT capitalized in Spanish: lunes, martes, miÃ©rcolesâ€¦ ğŸ‚ In Mexico it is tradition to wake someone up with "Las MaÃ±anitas" â€” a beautiful birthday song sung at dawn by family and friends!',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡¨ğŸ‡´ Colombia Â· ğŸ‡ªğŸ‡¸ Spain',
   writingTask:"Write today's date, your birthday, and 2â€“3 of your favorite days or months.",
   scaffolding:[
     {phrase:'Hoy es ___ (dÃ­a)',meaning:'Today is ___ (day)'},
     {phrase:'Mi cumpleaÃ±os es el ___ de ___',meaning:'My birthday is the ___ of ___'},
     {phrase:'Mi mes favorito es ___',meaning:'My favorite month is ___'},
     {phrase:'Mi dÃ­a favorito es el ___',meaning:'My favorite day is ___'},
     {phrase:'lunes Â· martes Â· miÃ©rcoles Â· jueves Â· viernes Â· sÃ¡bado Â· domingo',meaning:'Mon Â· Tue Â· Wed Â· Thu Â· Fri Â· Sat Â· Sun'},
   ],
   example:'Hoy es martes. Mi cumpleaÃ±os es el cinco de mayo. Mi mes favorito es diciembre.',
   grammarTip:'ğŸ’¡ Days and months are NOT capitalized in Spanish: lunes, enero. Dates use cardinal numbers EXCEPT the first: el primero de enero.',
  },
  {id:5,level:'noviceLow',unit:'nature',emoji:'ğŸŒˆ',
   title:'Los Colores â€” Colors in My World',
   culturalTheme:'The Vibrant Colors of Latin American Art',
   culturalFact:'Color is everywhere in Latin American culture! ğŸ¨ Frida Kahlo is famous worldwide for her bold, colorful self-portraits. ğŸ  In Mexico, Cuba, and Colombia, houses are painted in brilliant blues, yellows, and pinks. Guanajuato, Mexico is nicknamed "the most colorful city in the world!"',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡¨ğŸ‡º Cuba Â· ğŸ‡¨ğŸ‡´ Colombia',
   writingTask:'Write your 3 favorite colors and describe 2â€“3 objects using a color word.',
   scaffolding:[
     {phrase:'Mi color favorito es ___',meaning:'My favorite color is ___'},
     {phrase:'El/La ___ es ___',meaning:'The ___ is ___ (color)'},
     {phrase:'rojo Â· azul Â· verde Â· amarillo',meaning:'red Â· blue Â· green Â· yellow'},
     {phrase:'anaranjado Â· morado Â· rosado Â· negro Â· blanco Â· gris Â· marrÃ³n',meaning:'orange Â· purple Â· pink Â· black Â· white Â· gray Â· brown'},
   ],
   example:'Mi color favorito es el azul. El cielo es azul. Mi mochila es morada.',
   grammarTip:'ğŸ’¡ Color adjectives must match the noun! "La mochila es roja" (feminine) but "El libro es rojo" (masculine). Verde and azul stay the same for both!',
  },
  {id:6,level:'noviceLow',unit:'school',emoji:'ğŸ’',
   title:'La Clase â€” My Classroom',
   culturalTheme:'Schools Across the Spanish-Speaking World',
   culturalFact:'ğŸ« In many Latin American countries, students wear uniforms every day! ğŸ“š In Mexico, all public school textbooks are FREE and provided by the government â€” a tradition since 1960. In Spain, students typically stay at the same school from age 6 all the way to age 16.',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡¨ğŸ‡´ Colombia Â· ğŸ‡ªğŸ‡¸ Spain Â· ğŸ‡¦ğŸ‡· Argentina',
   writingTask:'Write 5â€“8 objects you find in your classroom or backpack.',
   scaffolding:[
     {phrase:'En mi clase hay ___',meaning:'In my class there is/are ___'},
     {phrase:'En mi mochila tengo ___',meaning:'In my backpack I have ___'},
     {phrase:'el lÃ¡piz Â· el bolÃ­grafo Â· el cuaderno Â· el libro',meaning:'pencil Â· pen Â· notebook Â· book'},
     {phrase:'la mochila Â· la regla Â· las tijeras Â· el papel',meaning:'backpack Â· ruler Â· scissors Â· paper'},
     {phrase:'la computadora Â· el escritorio Â· la silla Â· la pizarra',meaning:'computer Â· desk Â· chair Â· board'},
   ],
   example:'En mi mochila tengo un lÃ¡piz, un cuaderno y un libro. En mi clase hay una pizarra y muchas sillas.',
   grammarTip:'ğŸ’¡ Un = a/an (masculine): un lÃ¡piz. Una = a/an (feminine): una regla. Unos/Unas = some (plural).',
  },
  {id:7,level:'noviceLow',unit:'family',emoji:'ğŸ¾',
   title:'Mis Mascotas â€” Pets & Animals',
   culturalTheme:'Animals & Nature in the Spanish-Speaking World',
   culturalFact:'ğŸ¦‹ Latin America is one of the most biodiverse regions on Earth! The Amazon rainforest is home to over 10% of all species on the planet. ğŸ¦ Mexico is home to more than 1,000 species of birds! The quetzal bird ğŸ¦š is so important to Guatemala that it is their national symbol AND the name of their currency.',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡¨ğŸ‡´ Colombia Â· ğŸ‡µğŸ‡ª Peru Â· ğŸ‡¬ğŸ‡¹ Guatemala',
   writingTask:'Write about your pet or an animal you like. Include name, type, and color.',
   scaffolding:[
     {phrase:'Tengo un/una ___',meaning:'I have a ___'},
     {phrase:'No tengo mascota',meaning:"I don't have a pet"},
     {phrase:'Mi mascota se llama ___',meaning:'My pet is named ___'},
     {phrase:'Es ___ (color)',meaning:'It is ___ (color)'},
     {phrase:'el perro Â· el gato Â· el pez Â· el pÃ¡jaro Â· el conejo Â· el caballo',meaning:'dog Â· cat Â· fish Â· bird Â· rabbit Â· horse'},
   ],
   example:'Tengo un perro. Se llama Max. Es negro y blanco. Me gustan los perros porque son simpÃ¡ticos.',
   grammarTip:'ğŸ’¡ "Son" = they are (plural). "Es" = he/she/it is (singular). Max es negro. Los perros son simpÃ¡ticos.',
  },
  {id:8,level:'noviceLow',unit:'home',emoji:'ğŸ‘—',
   title:'La Ropa â€” Clothing',
   culturalTheme:'Traditional Dress Across the Spanish-Speaking World',
   culturalFact:'ğŸª¡ In Mexico, the "huipil" is a colorful handwoven blouse worn by indigenous women â€” each village has its own unique pattern. ğŸ’ƒ In Spain, the "traje de flamenca" is a ruffled dress worn during flamenco festivals. In Guatemala, woven textiles called "tejidos" are recognized by UNESCO as cultural heritage.',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡¬ğŸ‡¹ Guatemala Â· ğŸ‡ªğŸ‡¸ Spain Â· ğŸ‡µğŸ‡ª Peru',
   writingTask:'Write about 4â€“6 items of clothing you are wearing today or your favorite outfit.',
   scaffolding:[
     {phrase:'Hoy llevo ___',meaning:'Today I am wearing ___'},
     {phrase:'Mi ropa favorita es ___',meaning:'My favorite clothing is ___'},
     {phrase:'la camiseta Â· los pantalones Â· los zapatos Â· los tenis',meaning:'t-shirt Â· pants Â· shoes Â· sneakers'},
     {phrase:'la sudadera Â· la chaqueta Â· la falda Â· los calcetines Â· el sombrero',meaning:'sweatshirt Â· jacket Â· skirt Â· socks Â· hat'},
     {phrase:'Es/Son ___ (color)',meaning:'It is / They are ___ (color)'},
   ],
   example:'Hoy llevo una camiseta azul, pantalones negros y tenis blancos. TambiÃ©n llevo una sudadera gris.',
   grammarTip:'ğŸ’¡ "Llevar" = to wear. Yo llevo = I wear/am wearing. Many clothing items are always plural in Spanish: los zapatos, los pantalones.',
  },
  {id:9,level:'noviceLow',unit:'nature',emoji:'ğŸŒ¤ï¸',
   title:'El Tiempo â€” The Weather',
   culturalTheme:'Incredible Weather & Climates of the Spanish-Speaking World',
   culturalFact:'ğŸŒ Spanish-speaking countries have some of the world\'s most extreme climates! â„ï¸ Argentina\'s Patagonia is one of the windiest places on Earth. ğŸŒµ The Atacama Desert in Chile is the driest desert in the world. â˜€ï¸ Puerto Rico and Cuba enjoy warm tropical weather almost all year.',
   culturalRegion:'ğŸ‡¦ğŸ‡· Argentina Â· ğŸ‡¨ğŸ‡± Chile Â· ğŸ‡µğŸ‡· Puerto Rico Â· ğŸ‡ªğŸ‡¨ Ecuador',
   writingTask:"Describe today's weather and the weather in your favorite season.",
   scaffolding:[
     {phrase:'Hoy hace ___ (calor / frÃ­o / sol / viento)',meaning:'Today it is ___ (hot / cold / sunny / windy)'},
     {phrase:'Hoy estÃ¡ nublado / lluvioso',meaning:'Today it is cloudy / rainy'},
     {phrase:'Llueve / Nieva / Hace sol',meaning:'It rains / It snows / It is sunny'},
     {phrase:'En el invierno/verano/otoÃ±o/primaveraâ€¦',meaning:'In winter/summer/fall/springâ€¦'},
     {phrase:'Me gusta cuando hace ___',meaning:'I like it when it is ___'},
   ],
   example:'Hoy hace frÃ­o y estÃ¡ nublado. En el verano hace calor y hace sol. Me gusta cuando hace sol.',
   grammarTip:'ğŸ’¡ Most weather uses "hacer": hace calor, hace frÃ­o, hace sol, hace viento. But: llueve (it rains), nieva (it snows). "Estar" is used for: estÃ¡ nublado.',
  },
  {id:10,level:'noviceLow',unit:'identity',emoji:'ğŸ”¢',
   title:'Los NÃºmeros â€” Numbers & Quantities',
   culturalTheme:'Numbers & Markets in Latin America',
   culturalFact:'ğŸ›’ Markets (mercados) are the heart of shopping in most Latin American cities! At a mercado you negotiate prices directly with vendors â€” knowing your numbers in Spanish is ESSENTIAL! ğŸ‡²ğŸ‡½ Mexico City\'s Mercado de Jamaica is the largest flower market in the world.',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡µğŸ‡ª Peru Â· ğŸ‡¨ğŸ‡´ Colombia',
   writingTask:'Write your age, phone number, address number, and 3â€“5 quantities of things you own.',
   scaffolding:[
     {phrase:'Tengo ___ aÃ±os',meaning:'I am ___ years old'},
     {phrase:'Tengo ___ (libros / amigos / mascotas)',meaning:'I have ___ (books / friends / pets)'},
     {phrase:'Mi nÃºmero de telÃ©fono es ___',meaning:'My phone number is ___'},
     {phrase:'uno, dos, tresâ€¦ diez, once, doceâ€¦',meaning:'one, two, threeâ€¦ ten, eleven, twelveâ€¦'},
     {phrase:'veinte, treinta, cuarenta, cincuentaâ€¦cien',meaning:'20, 30, 40, 50â€¦100'},
   ],
   example:'Tengo catorce aÃ±os. Tengo dos mascotas y tres libros de espaÃ±ol. Tengo doce lÃ¡pices en mi mochila.',
   grammarTip:'ğŸ’¡ "Uno" becomes "un" before masculine nouns: un libro. Numbers 16â€“29 are written as one word: diecisÃ©is, veintiuno.',
  },
  // â”€â”€ NOVICE MID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {id:11,level:'noviceMid',unit:'identity',emoji:'ğŸ“…',
   title:'Mi Rutina Diaria â€” My Daily Routine',
   culturalTheme:'A Day in the Life in the Spanish-Speaking World',
   culturalFact:'Daily schedules can look very different! ğŸ‡ªğŸ‡¸ In Spain and parts of Latin America, there is a long lunch break (2â€“4 PM) where families go home to eat together. Dinner in Spain is often eaten at 9 or 10 PM! In Mexico City, school often starts at 7 AM and ends at 2 PM.',
   culturalRegion:'ğŸ‡ªğŸ‡¸ Spain Â· ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡¨ğŸ‡± Chile',
   writingTask:'Describe your typical school day from morning to afternoon. What do you do?',
   scaffolding:[
     {phrase:'Por la maÃ±ana, yo ___',meaning:'In the morning, I ___'},
     {phrase:'Voy a la escuela a las ___',meaning:'I go to school at ___'},
     {phrase:'En la escuela, yo ___',meaning:'At school, I ___'},
     {phrase:'Por la tarde, yo ___',meaning:'In the afternoon, I ___'},
     {phrase:'Por la noche, yo ___',meaning:'In the evening, I ___'},
   ],
   example:'Por la maÃ±ana, yo como el desayuno. Voy a la escuela a las ocho. En la escuela, yo estudio espaÃ±ol y matemÃ¡ticas. Por la tarde, yo hago la tarea.',
   grammarTip:'ğŸ’¡ Regular -AR verbs with "yo": yo como (I eat), yo estudio (I study), yo hablo (I speak). The "yo" form almost always ends in -o!',
  },
  {id:12,level:'noviceMid',unit:'leisure',emoji:'âš½',
   title:'Los Deportes â€” Sports & Activities',
   culturalTheme:'FÃºtbol: The Passion of the Spanish-Speaking World',
   culturalFact:'FÃºtbol (soccer) is more than a sport â€” it is a way of life! ğŸ† Argentina has produced legends like Lionel Messi. Spain won the World Cup in 2010. On game days in Mexico City or Buenos Aires, streets become completely quiet as everyone gathers around a TV. The famous "Â¡GOOOL!" chant is recognized worldwide.',
   culturalRegion:'ğŸ‡¦ğŸ‡· Argentina Â· ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡¨ğŸ‡´ Colombia Â· ğŸ‡ªğŸ‡¸ Spain',
   writingTask:'Write about a sport or activity you enjoy. Why do you like it? When and with whom do you play?',
   scaffolding:[
     {phrase:'Me gusta ___ porque ___',meaning:'I like ___ because ___'},
     {phrase:'Yo juego al ___',meaning:'I play ___'},
     {phrase:'Juego los ___ (dÃ­as)',meaning:'I play on ___days'},
     {phrase:'Es divertido / difÃ­cil / emocionante',meaning:"It's fun / difficult / exciting"},
     {phrase:'Juego con mis amigos / mi equipo',meaning:'I play with my friends / my team'},
   ],
   example:'Me gusta el fÃºtbol porque es muy divertido. Yo juego al fÃºtbol los sÃ¡bados con mis amigos. TambiÃ©n me gusta el bÃ¡squetbol.',
   grammarTip:'ğŸ’¡ "Jugar" = to play (sports). Use jugar + AL + sport: juego al fÃºtbol. "TambiÃ©n" = also/too.',
  },
  {id:13,level:'noviceMid',unit:'leisure',emoji:'ğŸ‰',
   title:'Las Fiestas â€” Holidays & Celebrations',
   culturalTheme:'Vibrant Festivals of the Spanish-Speaking World',
   culturalFact:'ğŸª¦ğŸŒ¼ El DÃ­a de los Muertos (Nov. 1â€“2) in Mexico is a joyful celebration of loved ones who have passed. Families build colorful altars (ofrendas) with food, candles, and marigold flowers â€” it is NOT sad, it is a reunion! ğŸ•¯ï¸ Las Posadas (Dec. 16â€“24) reenact Mary and Joseph\'s search for shelter with candlelit processions and piÃ±atas.',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡ªğŸ‡¸ Spain Â· ğŸ‡¬ğŸ‡¹ Guatemala',
   writingTask:'Describe your favorite holiday or celebration. What do you do? Who do you celebrate with? What do you eat?',
   scaffolding:[
     {phrase:'Mi fiesta favorita es ___',meaning:'My favorite holiday is ___'},
     {phrase:'Celebro con mi familia / mis amigos',meaning:'I celebrate with my family / friends'},
     {phrase:'Nosotros comemos ___ y bebemos ___',meaning:'We eat ___ and drink ___'},
     {phrase:'Es una fiesta muy ___',meaning:"It's a very ___ celebration"},
     {phrase:'especial Â· divertida Â· importante Â· bonita',meaning:'special Â· fun Â· important Â· beautiful'},
   ],
   example:'Mi fiesta favorita es la Navidad. Celebro con mi familia. Nosotros comemos tamales y bebemos ponche. Es una fiesta muy especial y bonita.',
   grammarTip:'ğŸ’¡ Nosotros = we. For -AR verbs, "nosotros" ends in -amos: celebramos. For -ER verbs: -emos: comemos.',
  },
  {id:14,level:'noviceMid',unit:'school',emoji:'ğŸ«',
   title:'Mis Clases â€” School Subjects & Schedule',
   culturalTheme:'Education in the Spanish-Speaking World',
   culturalFact:'ğŸ“š In many Latin American countries, students go to school from 7 AM to 2 PM â€” no afternoon classes! ğŸ“ Cuba has one of the highest literacy rates in the world (nearly 100%). Art, music, and physical education are often just as important as math and science in Latin American schools!',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡¨ğŸ‡º Cuba Â· ğŸ‡ªğŸ‡¸ Spain Â· ğŸ‡¨ğŸ‡´ Colombia',
   writingTask:'Describe your school schedule. What classes do you have? Which do you like or dislike? Why?',
   scaffolding:[
     {phrase:'Tengo la clase de ___',meaning:'I have ___ class'},
     {phrase:'Mi clase favorita es ___',meaning:'My favorite class is ___'},
     {phrase:'No me gusta ___ porque es ___',meaning:"I don't like ___ because it is ___"},
     {phrase:'el espaÃ±ol Â· las matemÃ¡ticas Â· las ciencias Â· la historia',meaning:'Spanish Â· math Â· science Â· history'},
     {phrase:'el arte Â· la mÃºsica Â· la educaciÃ³n fÃ­sica Â· el inglÃ©s',meaning:'art Â· music Â· P.E. Â· English'},
     {phrase:'fÃ¡cil Â· difÃ­cil Â· aburrido Â· interesante Â· divertido',meaning:'easy Â· hard Â· boring Â· interesting Â· fun'},
   ],
   example:'Tengo la clase de espaÃ±ol, matemÃ¡ticas y ciencias. Mi clase favorita es el arte porque es muy divertida. No me gusta la historia porque es aburrida.',
   grammarTip:'ğŸ’¡ Adjectives must agree: la historia es aburrida (f). el espaÃ±ol es interesante (m). Add -a for feminine, -o for masculine.',
  },
  {id:15,level:'noviceMid',unit:'identity',emoji:'ğŸª',
   title:'Mi DescripciÃ³n FÃ­sica â€” Physical Description',
   culturalTheme:'Beauty Standards & Identity in Latin America',
   culturalFact:'ğŸ¨ The Mexican muralist Diego Rivera painted people of all shapes, sizes, and skin tones as beautiful and powerful. ğŸ–¼ï¸ Frida Kahlo challenged traditional beauty standards through her art, embracing her indigenous heritage and unique appearance.',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡¨ğŸ‡º Cuba Â· ğŸ‡¨ğŸ‡´ Colombia',
   writingTask:'Describe yourself â€” your hair, eyes, height, and one or two other physical features.',
   scaffolding:[
     {phrase:'Soy alto/a Â· bajo/a Â· mediano/a',meaning:'I am tall Â· short Â· average height'},
     {phrase:'Tengo el pelo ___',meaning:'I have ___ hair'},
     {phrase:'Tengo los ojos ___',meaning:'I have ___ eyes'},
     {phrase:'rubio Â· moreno Â· castaÃ±o Â· negro Â· rizado Â· lacio',meaning:'blond Â· dark Â· brown Â· black Â· curly Â· straight (hair)'},
     {phrase:'azules Â· verdes Â· marrones Â· negros Â· grises',meaning:'blue Â· green Â· brown Â· black Â· grey (eyes)'},
   ],
   example:'Soy mediana y tengo el pelo castaÃ±o y lacio. Tengo los ojos verdes. TambiÃ©n tengo pecas.',
   grammarTip:'ğŸ’¡ "Ser" is for permanent physical traits: soy alta. "Tener" is for features you "have": tengo el pelo rubio. Remember gender: soy alto (boy) / soy alta (girl).',
  },
  {id:16,level:'noviceMid',unit:'identity',emoji:'ğŸ˜Š',
   title:'Mi Personalidad â€” Personality Traits',
   culturalTheme:'Character & Values in Spanish-Speaking Cultures',
   culturalFact:'ğŸ¤ Hospitality (la hospitalidad) is one of the most valued traits in Latin American culture. Guests are always offered food and drink. The concept of "simpatÃ­a" â€” being warm, friendly, and harmonious â€” is deeply valued across Latin America and Spain.',
   culturalRegion:'ğŸ‡¨ğŸ‡´ Colombia Â· ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡©ğŸ‡´ Dominican Republic',
   writingTask:'Describe your personality. What are you like? Write 3â€“5 sentences about your character and traits.',
   scaffolding:[
     {phrase:'Soy muy ___',meaning:'I am very ___'},
     {phrase:'No soy ___',meaning:'I am not ___'},
     {phrase:'A veces soy ___',meaning:'Sometimes I am ___'},
     {phrase:'simpÃ¡tico/a Â· amable Â· divertido/a Â· serio/a Â· inteligente',meaning:'friendly Â· kind Â· funny Â· serious Â· intelligent'},
     {phrase:'trabajador/a Â· creativo/a Â· tÃ­mido/a Â· extrovertido/a Â· responsable',meaning:'hardworking Â· creative Â· shy Â· outgoing Â· responsible'},
   ],
   example:'Soy muy trabajadora y creativa. TambiÃ©n soy simpÃ¡tica. A veces soy tÃ­mida, pero con mis amigos soy muy divertida. No soy seria.',
   grammarTip:'ğŸ’¡ Most personality adjectives change ending: simpÃ¡tico (m) / simpÃ¡tica (f). Some don\'t change: inteligente, responsable. "A veces" = sometimes.',
  },
  {id:17,level:'noviceMid',unit:'home',emoji:'ğŸ ',
   title:'Mi Casa â€” My Home & Rooms',
   culturalTheme:'Homes & Architecture in the Spanish-Speaking World',
   culturalFact:'ğŸ¡ In Mexico, many traditional homes are built around a central open courtyard called a "patio." ğŸ‡¨ğŸ‡º In Cuba, colorful colonial homes with tall ceilings line the streets of Havana. ğŸ‡ªğŸ‡¸ In Spain, many people live in apartments (pisos).',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡¨ğŸ‡º Cuba Â· ğŸ‡ªğŸ‡¸ Spain Â· ğŸ‡µğŸ‡ª Peru',
   writingTask:'Describe your home. What rooms do you have? Describe your favorite room and what is in it.',
   scaffolding:[
     {phrase:'Mi casa tiene ___',meaning:'My house has ___'},
     {phrase:'En mi casa hay ___',meaning:'In my house there is/are ___'},
     {phrase:'Mi cuarto favorito es ___',meaning:'My favorite room is ___'},
     {phrase:'la cocina Â· la sala Â· el dormitorio Â· el baÃ±o Â· el jardÃ­n',meaning:'kitchen Â· living room Â· bedroom Â· bathroom Â· garden'},
     {phrase:'En mi cuarto hay ___',meaning:'In my room there is/are ___'},
   ],
   example:'Mi casa tiene tres dormitorios, una cocina y dos baÃ±os. Mi cuarto favorito es mi dormitorio. En mi dormitorio hay una cama, una computadora y muchos libros.',
   grammarTip:'ğŸ’¡ "Hay" = there is / there are (one word for both!). It does NOT change for singular or plural: hay un libro, hay muchos libros.',
  },
  {id:18,level:'noviceMid',unit:'home',emoji:'ğŸ™ï¸',
   title:'Mi Comunidad â€” Places in My Town',
   culturalTheme:'City Life Across the Spanish-Speaking World',
   culturalFact:'ğŸ™ï¸ Mexico City is one of the largest cities in the world, with over 21 million people. ğŸ‡¦ğŸ‡· Buenos Aires is called "the Paris of South America." In most Spanish-speaking cities, the "plaza central" (town square) is the heart of community life.',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico City Â· ğŸ‡¦ğŸ‡· Buenos Aires Â· ğŸ‡ªğŸ‡¸ Madrid Â· ğŸ‡¨ğŸ‡´ BogotÃ¡',
   writingTask:'Describe your town or city. What places are there? What do you do there and with whom?',
   scaffolding:[
     {phrase:'En mi ciudad / pueblo hay ___',meaning:'In my city / town there is/are ___'},
     {phrase:'Yo voy al/a la ___ con ___',meaning:'I go to the ___ with ___'},
     {phrase:'el parque Â· la biblioteca Â· el supermercado Â· la iglesia',meaning:'park Â· library Â· supermarket Â· church'},
     {phrase:'el restaurante Â· la escuela Â· el cine Â· el hospital Â· la tienda',meaning:'restaurant Â· school Â· cinema Â· hospital Â· store'},
     {phrase:'Me gusta ir a ___ porque ___',meaning:'I like to go to ___ because ___'},
   ],
   example:'En mi ciudad hay un parque, una biblioteca y muchos restaurantes. Yo voy al parque con mis amigos los fines de semana. Me gusta ir a la biblioteca porque es tranquila.',
   grammarTip:'ğŸ’¡ "Ir a" = to go to. "Al" = a + el (must contract): voy al parque. But "a la" stays separate: voy a la tienda.',
  },
  {id:19,level:'noviceMid',unit:'identity',emoji:'ğŸ˜„',
   title:'Mis Emociones â€” Emotions & Feelings',
   culturalTheme:'Expressing Feelings in the Spanish-Speaking World',
   culturalFact:'ğŸ­ Latin American cultures are often described as emotionally expressive! ğŸ‡¨ğŸ‡´ Colombia ranks among the happiest countries in the world in global surveys. ğŸ‡¦ğŸ‡· Tango from Argentina is a powerful expression of longing, passion, and emotion through movement.',
   culturalRegion:'ğŸ‡¨ğŸ‡´ Colombia Â· ğŸ‡¦ğŸ‡· Argentina Â· ğŸ‡©ğŸ‡´ Dominican Republic',
   writingTask:'Write about how you feel today, how you feel at school, and when you feel your best.',
   scaffolding:[
     {phrase:'Hoy estoy ___',meaning:'Today I am / feel ___'},
     {phrase:'Cuando tengo un examen, estoy ___',meaning:'When I have a test, I feel ___'},
     {phrase:'Estoy feliz / triste / enojado(a) / cansado(a)',meaning:'I am happy / sad / angry / tired'},
     {phrase:'Estoy nervioso/a Â· emocionado/a Â· aburrido/a Â· sorprendido/a',meaning:'I am nervous Â· excited Â· bored Â· surprised'},
     {phrase:'Me siento bien / mal / asÃ­ asÃ­',meaning:'I feel good / bad / so-so'},
   ],
   example:'Hoy estoy muy feliz porque es viernes. En la clase de matemÃ¡ticas, estoy nervioso. Me siento bien cuando estoy con mis amigos.',
   grammarTip:'ğŸ’¡ "Estar" is used for emotions (temporary): estoy feliz, estÃ¡s cansado. NOT "ser." Remember: ser = permanent traits, estar = feelings & conditions.',
  },
  {id:20,level:'noviceMid',unit:'home',emoji:'ğŸ›ï¸',
   title:'Las Compras â€” Shopping for Clothes',
   culturalTheme:'Markets & Shopping Culture in Latin America',
   culturalFact:'ğŸ›’ Shopping in Latin America is a social experience! ğŸ‡²ğŸ‡½ In Mexican markets (mercados), you can buy everything while chatting with vendors. In most Latin American markets, prices are negotiable â€” bargaining (regatear) is expected and even enjoyable!',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡¬ğŸ‡¹ Guatemala Â· ğŸ‡¨ğŸ‡´ Colombia Â· ğŸ‡µğŸ‡ª Peru',
   writingTask:'Write about a shopping trip. What do you want to buy? Where do you go? How much does it cost?',
   scaffolding:[
     {phrase:'Quiero comprar ___',meaning:'I want to buy ___'},
     {phrase:'Voy a la tienda / al mercado / al centro comercial',meaning:'I go to the store / market / mall'},
     {phrase:'Â¿CuÃ¡nto cuesta(n)? / Cuesta(n) ___',meaning:'How much does it/do they cost?'},
     {phrase:'Es barato/a Â· caro/a Â· perfecto/a',meaning:"It's cheap Â· expensive Â· perfect"},
     {phrase:'Lo/La compro',meaning:'I buy it'},
   ],
   example:'Quiero comprar una chaqueta y unos tenis. Voy al centro comercial con mi mamÃ¡. La chaqueta cuesta veinte dÃ³lares. Â¡Es muy barata! La compro.',
   grammarTip:'ğŸ’¡ "Querer" = to want (stem-changing: yo quiero, tÃº quieres). The stem changes from e â†’ ie. Another eâ†’ie verb you know: tener â†’ yo tengo (irregular), tÃº tienes.',
  },
  {id:21,level:'noviceMid',unit:'travel',emoji:'âœˆï¸',
   title:'Los Viajes â€” Travel & Transportation',
   culturalTheme:'Getting Around the Spanish-Speaking World',
   culturalFact:'ğŸšŒ Transportation in Latin America is colorful and unique! ğŸ‡¨ğŸ‡´ In Colombia, a "chiva" is a brightly painted bus decorated with flowers and murals. ğŸš• In Cuba, 1950s American cars serve as taxis, making Havana look like a vintage car museum.',
   culturalRegion:'ğŸ‡¨ğŸ‡´ Colombia Â· ğŸ‡¨ğŸ‡º Cuba Â· ğŸ‡ªğŸ‡¨ Ecuador Â· ğŸ‡¦ğŸ‡· Argentina',
   writingTask:'Describe a trip you have taken or a place you want to visit. How do you get there? What do you see?',
   scaffolding:[
     {phrase:'Quiero ir / Fui a ___',meaning:'I want to go / I went to ___'},
     {phrase:'Voy en aviÃ³n / en carro / en autobÃºs / en tren',meaning:'I go by plane / car / bus / train'},
     {phrase:'El lugar es ___ (bonito / interesante / famoso)',meaning:'The place is ___ (pretty / interesting / famous)'},
     {phrase:'Quiero ver / visitar ___',meaning:'I want to see / visit ___'},
     {phrase:'Hay muchos/muchas ___ allÃ­',meaning:'There are many ___ there'},
   ],
   example:'Quiero ir a MÃ©xico. Voy en aviÃ³n con mi familia. MÃ©xico es un paÃ­s muy bonito e interesante. Quiero ver las pirÃ¡mides y comer tacos.',
   grammarTip:'ğŸ’¡ "Quiero" + infinitive = I want to + verb: quiero ir, quiero ver, quiero comer. The second verb always stays in the infinitive (-ar/-er/-ir form)!',
  },
  {id:22,level:'noviceMid',unit:'leisure',emoji:'ğŸµ',
   title:'La MÃºsica y las Artes â€” Music & Arts',
   culturalTheme:'The Musical Soul of the Spanish-Speaking World',
   culturalFact:'ğŸ¶ Music is everywhere in Latin culture! ğŸ’ƒ Salsa originated in the Caribbean, mixing African rhythms with Spanish melodies. ğŸ‡¦ğŸ‡· Tango from Argentina is a UNESCO Intangible Cultural Heritage. ğŸº Reggaeton, which started in Puerto Rico, is now one of the most-streamed music genres in the world!',
   culturalRegion:'ğŸ‡¨ğŸ‡´ Colombia Â· ğŸ‡¦ğŸ‡· Argentina Â· ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡µğŸ‡· Puerto Rico',
   writingTask:'Write about your favorite type of music, a song, or a movie. Why do you like it? How do you feel when you listen or watch?',
   scaffolding:[
     {phrase:'Me gusta escuchar ___ porque ___',meaning:'I like to listen to ___ because ___'},
     {phrase:'Mi gÃ©nero favorito es ___',meaning:'My favorite genre is ___'},
     {phrase:'Me gusta la pelÃ­cula / la canciÃ³n ___',meaning:'I like the movie / song ___'},
     {phrase:'Cuando escucho ___, me siento ___',meaning:'When I listen to ___, I feel ___'},
     {phrase:'la mÃºsica pop Â· el rap Â· el rock Â· la mÃºsica latina Â· el reggaeton',meaning:'pop Â· rap Â· rock Â· Latin music Â· reggaeton'},
   ],
   example:'Me gusta escuchar mÃºsica pop porque es muy animada. Mi gÃ©nero favorito es el pop. TambiÃ©n me gusta el reggaeton. Cuando escucho mÃºsica, estoy muy feliz.',
   grammarTip:'ğŸ’¡ "Escuchar" = to listen to. In Spanish you do NOT need extra words after escuchar: "escucho mÃºsica" not "escucho a la mÃºsica."',
  },
  {id:23,level:'noviceMid',unit:'technology',emoji:'ğŸ“±',
   title:'La TecnologÃ­a â€” Technology & Social Media',
   culturalTheme:'Technology & Youth Culture in Latin America',
   culturalFact:'ğŸ“± Latin American youth are among the most active social media users in the world! WhatsApp is the #1 messaging app in nearly every Spanish-speaking country. ğŸ‡ºğŸ‡¾ Uruguay became the first country in the world to give every student a free laptop through its Plan Ceibal program!',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡¦ğŸ‡· Argentina Â· ğŸ‡ºğŸ‡¾ Uruguay Â· ğŸ‡¨ğŸ‡± Chile',
   writingTask:'Write about how you use technology. What apps or devices do you use? How much time do you spend online?',
   scaffolding:[
     {phrase:'Uso mi telÃ©fono / computadora / tableta para ___',meaning:'I use my phone / computer / tablet to ___'},
     {phrase:'Me gusta usar ___ (la app)',meaning:'I like to use ___ (the app)'},
     {phrase:'Paso ___ horas en / usando ___',meaning:'I spend ___ hours on / using ___'},
     {phrase:'Escucho mÃºsica / Veo videos / Mando mensajes / Juego videojuegos',meaning:'I listen to music / watch videos / send messages / play video games'},
     {phrase:'En mi opiniÃ³n, la tecnologÃ­a es ___',meaning:'In my opinion, technology is ___'},
   ],
   example:'Uso mi telÃ©fono para escuchar mÃºsica y mandar mensajes. Me gusta usar Instagram y YouTube. Paso dos horas cada dÃ­a usando mi telÃ©fono. En mi opiniÃ³n, la tecnologÃ­a es muy Ãºtil.',
   grammarTip:'ğŸ’¡ "Para" + infinitive = in order to: uso mi telÃ©fono para escuchar mÃºsica. "Cada dÃ­a" = every day, "cada semana" = every week.',
  },
  {id:24,level:'noviceMid',unit:'body',emoji:'ğŸ’ª',
   title:'Mi Salud â€” Health & Body Parts',
   culturalTheme:'Health & Wellness in the Spanish-Speaking World',
   culturalFact:'ğŸŒ¿ Traditional medicine is deeply respected in Latin America. In Mexico and Peru, "curanderos" (traditional healers) use plants and herbs to treat illness. ğŸ«– "TÃ© de manzanilla" (chamomile tea) is the go-to remedy for stomachaches across Latin America.',
   culturalRegion:'ğŸ‡²ğŸ‡½ Mexico Â· ğŸ‡µğŸ‡ª Peru Â· ğŸ‡¨ğŸ‡º Cuba Â· ğŸ‡§ğŸ‡´ Bolivia',
   writingTask:'Write about how you stay healthy. What do you eat? Do you exercise? How do you feel when you are sick?',
   scaffolding:[
     {phrase:'Para estar sano/a, yo ___',meaning:'To be healthy, I ___'},
     {phrase:'Como ___ y bebo ___',meaning:'I eat ___ and drink ___'},
     {phrase:'Hago ejercicio / Camino / Duermo ___ horas',meaning:'I exercise / walk / sleep ___ hours'},
     {phrase:'Cuando estoy enfermo/a, me duele ___',meaning:'When I am sick, my ___ hurts'},
     {phrase:'la cabeza Â· el estÃ³mago Â· la garganta Â· la espalda Â· el pie',meaning:'head Â· stomach Â· throat Â· back Â· foot'},
   ],
   example:'Para estar sana, como frutas y verduras y bebo mucha agua. Hago ejercicio tres veces a la semana. Cuando estoy enferma, me duele la garganta y duermo mucho.',
   grammarTip:'ğŸ’¡ "Me duele" = it hurts me (singular): me duele la cabeza. "Me duelen" = they hurt me (plural): me duelen los pies. Just like me gusta / me gustan!',
  },
  {id:25,level:'noviceMid',unit:'nature',emoji:'ğŸŒ¸',
   title:'Las Estaciones y la Naturaleza â€” Seasons & Nature',
   culturalTheme:'The Natural Wonders of the Spanish-Speaking World',
   culturalFact:'ğŸŒ Spanish-speaking countries have some of Earth\'s most breathtaking wonders! ğŸ”ï¸ The Andes Mountains stretch through 7 South American countries. ğŸŒº Costa Rica has more biodiversity per square kilometer than almost anywhere on Earth, and 25% of its land is protected national park.',
   culturalRegion:'ğŸ‡ªğŸ‡¨ Ecuador Â· ğŸ‡¦ğŸ‡· Argentina Â· ğŸ‡¨ğŸ‡· Costa Rica Â· ğŸ‡¨ğŸ‡± Chile',
   writingTask:'Describe your favorite season and what you like to do outside. What is nature like where you live?',
   scaffolding:[
     {phrase:'Mi estaciÃ³n favorita es ___ porque ___',meaning:'My favorite season is ___ because ___'},
     {phrase:'En el verano / invierno / otoÃ±o / primaveraâ€¦',meaning:'In summer / winter / fall / springâ€¦'},
     {phrase:'Me gusta ___ (actividad) cuando hace ___',meaning:'I like to ___ when it is ___'},
     {phrase:'En mi ciudad / estado hay ___ (montaÃ±as Â· rÃ­os Â· playas Â· bosques)',meaning:'In my city / state there are ___ (mountains Â· rivers Â· beaches Â· forests)'},
     {phrase:'La naturaleza aquÃ­ es ___',meaning:'Nature here is ___'},
   ],
   example:'Mi estaciÃ³n favorita es la primavera porque hace sol y no hace mucho calor. Me gusta caminar en el parque cuando hace buen tiempo. En mi ciudad hay un rÃ­o y muchos Ã¡rboles. La naturaleza aquÃ­ es muy bonita.',
   grammarTip:'ğŸ’¡ "Hacer buen / mal tiempo" = the weather is nice / bad. "Voy a + infinitive" = going to (near future): voy a nadar este verano.',
  },
];

// â”€â”€ PDF generator â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildPdfHtml({studentName,period,prompt,level,writingText,feedback}){
  const date = new Date().toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'});
  const corrections = feedback?.improvements?.map(imp=>
    `<tr>
      <td style="padding:8px 12px;border-bottom:1px solid #eee;color:#dc2626;text-decoration:line-through">${imp.studentText||'â€”'}</td>
      <td style="padding:8px 12px;border-bottom:1px solid #eee;color:#16a34a;font-weight:600">${imp.correction||'â€”'}</td>
      <td style="padding:8px 12px;border-bottom:1px solid #eee;color:#555;font-size:13px">${imp.explanation||''}</td>
    </tr>`
  ).join('')||'';
  return `<!DOCTYPE html>
<html lang="es"><head><meta charset="UTF-8"/>
<title>Taller de Escritura â€“ ${studentName}</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Arial,sans-serif;color:#1a1a1a;padding:40px;max-width:760px;margin:auto}
.hdr{background:linear-gradient(135deg,#b91c1c,#d97706);color:white;border-radius:14px;padding:28px 32px;margin-bottom:28px}
.hdr-top{display:flex;justify-content:space-between;align-items:flex-start}
.logo{font-size:26px;font-weight:700}
.sub{font-size:13px;opacity:.85;margin-top:3px}
.meta{text-align:right;font-size:13px;opacity:.85}
.badge{display:inline-block;background:rgba(255,255,255,.25);border-radius:20px;padding:4px 14px;font-size:12px;font-weight:600;margin-top:6px}
.sec{background:#f9fafb;border:1px solid #e5e7eb;border-radius:12px;padding:20px 24px;margin-bottom:20px}
.sec-title{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:#9ca3af;margin-bottom:12px}
.writing-box{background:#fff;border:2px solid #d1fae5;border-radius:10px;padding:18px 22px;font-size:15px;line-height:1.7;font-style:italic}
.corrected-box{background:#fff;border:2px solid #a7f3d0;border-radius:10px;padding:18px 22px;font-size:15px;line-height:1.7;font-weight:600}
.strengths{list-style:none}.strengths li{padding:6px 0;font-size:14px;color:#166534;display:flex;gap:10px}
.strengths li::before{content:"âœ“";font-weight:700}
table{width:100%;border-collapse:collapse;font-size:13px}
th{background:#f3f4f6;padding:10px 12px;text-align:left;font-size:11px;text-transform:uppercase;letter-spacing:.5px;color:#6b7280}
.encourage{background:#fffbeb;border:1px solid #fde68a;border-radius:10px;padding:16px 20px;text-align:center;font-size:15px;font-weight:600;color:#92400e;margin-bottom:20px}
.cultural{background:#fff7ed;border:1px solid #fed7aa;border-radius:10px;padding:14px 18px;font-size:13px;color:#9a3412;margin-bottom:20px}
.footer{text-align:center;font-size:12px;color:#9ca3af;margin-top:32px;border-top:1px solid #e5e7eb;padding-top:16px}
</style></head><body>
<div class="hdr"><div class="hdr-top">
<div><div class="logo">âœï¸ SeÃ±o Bluemel</div><div class="sub">Taller de Escritura Â· Spanish Writing Lab</div><div class="badge">${level.emoji} ${level.label} Â· ACTFL</div></div>
<div class="meta"><strong>${studentName||'Student'}</strong><br/>${period?'Period '+period+'<br/>':''}${date}</div>
</div></div>
<div class="sec"><div class="sec-title">ğŸ“ Writing Prompt</div>
<p style="font-size:14px;color:#374151">${prompt.emoji} <strong>${prompt.title}</strong> â€” ${prompt.writingTask}</p></div>
<div class="sec"><div class="sec-title">âœï¸ My Writing</div><div class="writing-box">${writingText}</div></div>
${feedback?.strengths?.length?`<div class="sec"><div class="sec-title" style="color:#15803d">ğŸŒŸ What I Did Well</div><ul class="strengths">${feedback.strengths.map(s=>`<li>${s}</li>`).join('')}</ul></div>`:''}
${corrections?`<div class="sec"><div class="sec-title" style="color:#1d4ed8">ğŸ“š Corrections</div><table><thead><tr><th>My Writing</th><th>Corrected</th><th>Explanation</th></tr></thead><tbody>${corrections}</tbody></table></div>`:''}
${feedback?.correctedVersion?`<div class="sec"><div class="sec-title" style="color:#065f46">âœ… Polished Version</div><div class="corrected-box">${feedback.correctedVersion}</div></div>`:''}
${feedback?.culturalNote?`<div class="cultural">ğŸŒ <strong>Cultural Connection:</strong> ${feedback.culturalNote}</div>`:''}
${feedback?.encouragement?`<div class="encourage">ğŸ‰ ${feedback.encouragement}</div>`:''}
<div class="footer">SeÃ±o Bluemel Taller de Escritura Â· Generated ${date}</div>
</body></html>`;
}

// â”€â”€ API Key Setup Screen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function ApiKeySetup({onSave}){
  const [key,setKey] = React.useState('');
  const [err,setErr] = React.useState('');
  const save = () => {
    if(!key.trim().startsWith('sk-ant-')){ setErr('Please enter a valid Anthropic API key (starts with sk-ant-â€¦)'); return; }
    localStorage.setItem('taller_api_key', key.trim());
    onSave(key.trim());
  };
  return (
    <div className="min-h-screen bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 flex items-center justify-center p-4">
      <div className="bg-white rounded-2xl shadow-xl max-w-md w-full p-8">
        <div className="text-center mb-6">
          <div className="text-5xl mb-3">âœï¸</div>
          <h1 className="text-2xl font-bold text-gray-900">SeÃ±o Bluemel</h1>
          <p className="text-gray-500 text-sm mt-1">Taller de Escritura Â· Spanish Writing Lab</p>
        </div>
        <div className="bg-amber-50 border border-amber-200 rounded-xl p-4 mb-5 text-sm text-amber-800">
          <strong>ğŸ”‘ One-time Setup:</strong> Enter your Anthropic API key to enable AI feedback. The key is saved on this device only.
        </div>
        <label className="block text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1">Anthropic API Key</label>
        <input
          type="password" value={key} onChange={e=>{setKey(e.target.value);setErr('');}}
          placeholder="sk-ant-..."
          className="w-full border-2 border-gray-200 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-orange-400 mb-2"
        />
        {err && <p className="text-red-600 text-xs mb-3">{err}</p>}
        <button onClick={save} className="w-full bg-gradient-to-r from-red-600 to-orange-500 text-white font-bold py-3 rounded-xl hover:opacity-90 transition-opacity mt-1">
          Save & Start Writing
        </button>
        <p className="text-xs text-gray-400 text-center mt-4">
          Get your key at <strong>console.anthropic.com</strong> Â· It's only stored on this device
        </p>
      </div>
    </div>
  );
}

// â”€â”€ Share / PDF Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function ShareModal({studentName,prompt,level,writingText,feedback,onClose}){
  const [name,setName] = React.useState(studentName||'');
  const [period,setPeriod] = React.useState('');
  const [copied,setCopied] = React.useState(false);
  const [downloaded,setDownloaded] = React.useState(false);

  const summary = `--- SeÃ±o Bluemel Taller de Escritura ---
Student: ${name||'(name)'}   Period: ${period||'(period)'}
Level: ${level.label}   Prompt: ${prompt.title}
Date: ${new Date().toLocaleDateString('en-US',{month:'long',day:'numeric',year:'numeric'})}

MY WRITING:
${writingText}
${feedback?.correctedVersion?`\nPOLISHED VERSION:\n${feedback.correctedVersion}`:''}
${feedback?.strengths?.length?`\nSTRENGTHS:\n${feedback.strengths.map(s=>'â€¢ '+s).join('\n')}`:''}
${feedback?.improvements?.length?`\nCORRECTIONS:\n${feedback.improvements.map(i=>`â€¢ ${i.studentText||''} â†’ ${i.correction||''}: ${i.explanation||''}`).join('\n')}`:''}
${feedback?.encouragement?`\n${feedback.encouragement}`:''}
--- Taller de Escritura ---`;

  const downloadPdf = ()=>{
    const html = buildPdfHtml({studentName:name,period,prompt,level,writingText,feedback});
    const blob = new Blob([html],{type:'text/html'});
    const url = URL.createObjectURL(blob);
    const win = window.open(url,'_blank');
    if(win){ win.onload=()=>{ win.focus(); win.print(); setDownloaded(true); }; }
  };

  const emailLink = ()=>{
    const subject = encodeURIComponent(`Taller de Escritura â€“ ${name} â€“ ${prompt.title}`);
    const body = encodeURIComponent(summary);
    window.open(`mailto:?subject=${subject}&body=${body}`);
  };

  const copyText = ()=>{
    navigator.clipboard.writeText(summary).then(()=>{ setCopied(true); setTimeout(()=>setCopied(false),2500); });
  };

  return (
    <div className="fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4" onClick={onClose}>
      <div className="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6" onClick={e=>e.stopPropagation()}>
        <div className="flex items-center justify-between mb-5">
          <div><h2 className="text-lg font-bold text-gray-900">ğŸ“¤ Share Your Work</h2>
            <p className="text-xs text-gray-500 mt-0.5">Submit to SeÃ±o Bluemel</p></div>
          <button onClick={onClose} className="text-gray-400 hover:text-gray-600 text-2xl font-bold leading-none">Ã—</button>
        </div>
        <div className="space-y-3 mb-5">
          <div>
            <label className="text-xs font-semibold text-gray-600 uppercase tracking-wide block mb-1">Your Name</label>
            <input value={name} onChange={e=>setName(e.target.value)} placeholder="First and last name"
              className="w-full border-2 border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-orange-400"/>
          </div>
          <div>
            <label className="text-xs font-semibold text-gray-600 uppercase tracking-wide block mb-1">Class Period</label>
            <input value={period} onChange={e=>setPeriod(e.target.value)} placeholder="e.g., Period 3"
              className="w-full border-2 border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-orange-400"/>
          </div>
        </div>
        <div className="space-y-2.5">
          <button onClick={downloadPdf} className="w-full flex items-center gap-3 bg-gradient-to-r from-red-600 to-orange-500 text-white rounded-xl px-4 py-3 font-semibold text-sm hover:opacity-90 transition-opacity shadow">
            <span className="text-xl">ğŸ“„</span>
            <div className="text-left">
              <div>{downloaded?'âœ… PDF opened â€” choose "Save as PDF" in print dialog':'Download as PDF'}</div>
              <div className="text-xs font-normal opacity-80">Opens a print-ready page â†’ Save as PDF</div>
            </div>
          </button>
          <button onClick={emailLink} className="w-full flex items-center gap-3 bg-gradient-to-r from-blue-600 to-indigo-500 text-white rounded-xl px-4 py-3 font-semibold text-sm hover:opacity-90 transition-opacity shadow">
            <span className="text-xl">ğŸ“§</span>
            <div className="text-left">
              <div>Share via Email</div>
              <div className="text-xs font-normal opacity-80">Opens your email with writing pre-filled</div>
            </div>
          </button>
          <button onClick={copyText} className="w-full flex items-center gap-3 bg-gray-100 text-gray-700 rounded-xl px-4 py-3 font-semibold text-sm hover:bg-gray-200 transition-colors">
            <span className="text-xl">{copied?'âœ…':'ğŸ“‹'}</span>
            <div className="text-left">
              <div>{copied?'Copied!':'Copy Writing Summary'}</div>
              <div className="text-xs font-normal text-gray-500">Paste into Google Classroom, email, etc.</div>
            </div>
          </button>
        </div>
        <p className="text-xs text-center text-gray-400 mt-4">PDF tip: Choose <strong>"Save as PDF"</strong> as the print destination</p>
      </div>
    </div>
  );
}

// â”€â”€ Main App â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function App(){
  // â”€â”€ API key state â”€â”€
  const [apiKey,setApiKey] = React.useState(()=>{
    if(TEACHER_API_KEY) return TEACHER_API_KEY;
    return localStorage.getItem('taller_api_key')||'';
  });

  // â”€â”€ App state â”€â”€
  const [selectedLevel,setSelectedLevel] = React.useState('noviceLow');
  const [selectedUnit,setSelectedUnit] = React.useState('all');
  const [selectedPrompt,setSelectedPrompt] = React.useState(null);
  const [writingText,setWritingText] = React.useState('');
  const [feedback,setFeedback] = React.useState(null);
  const [isLoading,setIsLoading] = React.useState(false);
  const [view,setView] = React.useState('prompts');
  const [showShare,setShowShare] = React.useState(false);
  const [studentName,setStudentName] = React.useState('');
  const [apiError,setApiError] = React.useState('');
  const taRef = React.useRef(null);

  // Show setup screen if no API key
  if(!apiKey) return <ApiKeySetup onSave={k=>setApiKey(k)}/>;

  const level = LEVELS[selectedLevel];
  const availableUnits = ['all',...Array.from(new Set(PROMPTS.filter(p=>p.level===selectedLevel).map(p=>p.unit)))];
  const visiblePrompts = PROMPTS.filter(p=>p.level===selectedLevel&&(selectedUnit==='all'||p.unit===selectedUnit));
  const wordCount = writingText.trim()?writingText.trim().split(/\s+/).length:0;

  const insertChar = (char)=>{
    const ta = taRef.current; if(!ta) return;
    const s=ta.selectionStart, e=ta.selectionEnd;
    const newText = writingText.slice(0,s)+char+writingText.slice(e);
    setWritingText(newText);
    setTimeout(()=>{ ta.selectionStart=ta.selectionEnd=s+1; ta.focus(); },0);
  };

  const selectPrompt = p=>{ setSelectedPrompt(p); setWritingText(''); setFeedback(null); setApiError(''); setView('write'); };

  const reset = ()=>{ setView('prompts'); setSelectedPrompt(null); setWritingText(''); setFeedback(null); setApiError(''); };
  const revise = ()=>{ setView('write'); setFeedback(null); setApiError(''); };

  const getFeedback = async ()=>{
    if(!writingText.trim()||!selectedPrompt) return;
    setIsLoading(true); setFeedback(null); setApiError('');
    const levelInstructions = selectedLevel==='noviceLow'
      ? 'This is NOVICE LOW level. Comment ONLY on vocabulary and memorized phrases. Do NOT comment on grammar complexity. Students are writing just 3â€“10 words total. Praise every attempt warmly.'
      : 'This is NOVICE MID level. Students are writing 15â€“40 words using simple sentences. Give ONE simple, clear grammar tip maximum. Focus on helping them build confidence.';
    const sys = `You are a warm, encouraging Spanish language teacher for ACTFL ${level.label} level middle school beginners (ages 11â€“14).
${levelInstructions}
Rules:
- Write ALL feedback in clear, simple English that a middle schooler can understand
- Be VERY warm, positive, and celebratory â€” ALWAYS lead with genuine praise
- Keep the total feedback SHORT and easy to read (under 200 words total)
- Show corrected Spanish with EVERY suggestion
- Use simple vocabulary â€” no complicated grammar terms
- End with genuine, specific encouragement
- If the student wrote very little, still find something to praise
Respond ONLY with a valid JSON object (no markdown, no code fences, no extra text before or after):
{"strengths":["specific praise 1","specific praise 2"],"improvements":[{"issue":"one simple thing to improve","studentText":"exactly what they wrote","correction":"the correct Spanish","explanation":"simple reason in plain English"}],"correctedVersion":"the full corrected Spanish text","encouragement":"a warm, specific closing sentence","culturalNote":"one interesting sentence connecting their writing to the cultural theme of this prompt"}`;
    try {
      const res = await fetch("https://api.anthropic.com/v1/messages",{
        method:"POST",
        headers:{"Content-Type":"application/json","x-api-key":apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},
        body:JSON.stringify({
          model:"claude-sonnet-4-20250514",max_tokens:1000,system:sys,
          messages:[{role:"user",content:`Student level: ${level.label}\nPrompt topic: ${selectedPrompt.title}\nWriting task: ${selectedPrompt.writingTask}\nStudent's Spanish writing: "${writingText}"`}]
        })
      });
      if(!res.ok){
        const errData = await res.json().catch(()=>({}));
        if(res.status===401) throw new Error('Invalid API key. Please check your key and reload the page.');
        if(res.status===429) throw new Error('Too many requests. Please wait a moment and try again.');
        throw new Error(errData.error?.message||`API error ${res.status}`);
      }
      const data = await res.json();
      const raw = data.content.map(b=>b.text||'').join('').trim();
      // Strip any accidental markdown fences
      const clean = raw.replace(/^```(?:json)?\s*/,'').replace(/\s*```$/,'').trim();
      const parsed = JSON.parse(clean);
      setFeedback(parsed); setView('feedback');
    } catch(err){
      setApiError(err.message||'Could not connect. Please check your internet connection and try again.');
      setView('feedback');
    } finally { setIsLoading(false); }
  };

  // Color helpers
  const isGreen = selectedLevel==='noviceLow';
  const lvlBg   = isGreen?'bg-green-600':'bg-teal-600';
  const lvlBorder= isGreen?'border-green-400':'border-teal-400';
  const lvlText  = isGreen?'text-green-700':'text-teal-700';
  const lvlBgLight=isGreen?'bg-green-50':'bg-teal-50';
  const lvlBadge = isGreen?'bg-green-100 text-green-800':'bg-teal-100 text-teal-800';
  const lvlBtn   = isGreen?'bg-green-600 text-white border-green-600':'bg-teal-600 text-white border-teal-600';

  return (
    <div className="min-h-screen bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50">
      {showShare&&selectedPrompt&&(
        <ShareModal studentName={studentName} prompt={selectedPrompt} level={level}
          writingText={writingText} feedback={feedback} onClose={()=>setShowShare(false)}/>
      )}

      {/* Header */}
      <header className="bg-gradient-to-r from-red-700 via-orange-600 to-yellow-500 text-white shadow-lg sticky top-0 z-40">
        <div className="max-w-5xl mx-auto px-4 py-4 flex items-center justify-between gap-3">
          <div className="flex items-center gap-3 min-w-0">
            <span className="text-3xl flex-shrink-0">âœï¸</span>
            <div className="min-w-0">
              <h1 className="text-xl font-bold leading-tight whitespace-nowrap">
                SeÃ±o Bluemel <span className="font-normal opacity-90">Taller de Escritura</span>
              </h1>
              <p className="text-xs text-orange-100 hidden sm:block">Spanish Writing Lab Â· ACTFL Spanish 1</p>
            </div>
          </div>
          <div className="flex items-center gap-2 flex-shrink-0">
            {view!=='prompts'&&(
              <button onClick={reset} className="text-sm bg-white/20 hover:bg-white/30 px-3 py-1.5 rounded-full transition-colors whitespace-nowrap">â† Prompts</button>
            )}
            {(view==='write'||view==='feedback')&&writingText.trim()&&(
              <button onClick={()=>setShowShare(true)}
                className="text-sm bg-white text-orange-700 font-semibold hover:bg-orange-50 px-3 py-1.5 rounded-full flex items-center gap-1.5 shadow transition-colors whitespace-nowrap">
                <span>ğŸ“¤</span> Share / PDF
              </button>
            )}
            {!TEACHER_API_KEY&&(
              <button onClick={()=>{if(confirm('Change API key?')){ localStorage.removeItem('taller_api_key'); setApiKey(''); }}}
                title="Change API key" className="text-xs bg-white/10 hover:bg-white/20 px-2 py-1.5 rounded-full transition-colors">ğŸ”‘</button>
            )}
          </div>
        </div>
      </header>

      <div className="max-w-5xl mx-auto px-4 py-6">
        {/* Student name bar (write/feedback views) */}
        {view!=='prompts'&&(
          <div className="flex items-center gap-3 mb-4 flex-wrap">
            <span className="text-sm text-gray-500 font-semibold whitespace-nowrap">Your name:</span>
            <input value={studentName} onChange={e=>setStudentName(e.target.value)}
              placeholder="First and last name (for your PDF)"
              className="flex-1 max-w-xs border-2 border-gray-200 rounded-lg px-3 py-1.5 text-sm focus:outline-none focus:border-orange-400 bg-white"/>
          </div>
        )}

        {/* Level Tabs */}
        <div className="flex gap-3 mb-4">
          {Object.values(LEVELS).map(lv=>(
            <button key={lv.id} onClick={()=>{ setSelectedLevel(lv.id); setSelectedUnit('all'); reset(); }}
              className={`flex-1 py-3 px-3 rounded-xl border-2 font-semibold text-sm transition-all ${
                selectedLevel===lv.id
                  ? lv.id==='noviceLow'?'bg-green-600 text-white border-green-600 shadow-md':'bg-teal-600 text-white border-teal-600 shadow-md'
                  : 'bg-white text-gray-600 border-gray-200 hover:border-gray-300'
              }`}>
              <span className="text-lg">{lv.emoji}</span>
              <span className="ml-2">{lv.label}</span>
              <div className="text-xs font-normal mt-0.5 opacity-80 hidden sm:block">{lv.tagline}</div>
            </button>
          ))}
        </div>

        {/* Guidelines bar */}
        <div className={`${lvlBgLight} border ${lvlBorder} rounded-xl p-4 mb-4`}>
          <div className="flex items-start gap-4 flex-wrap">
            <div className="flex-1 min-w-48">
              <p className={`text-xs font-bold uppercase tracking-wide ${lvlText} mb-2`}>{level.emoji} {level.label} Writing Guidelines</p>
              <ul className="space-y-1">
                {level.guidelines.map((g,i)=>(
                  <li key={i} className="text-xs text-gray-700 flex gap-2"><span className={`${lvlText} font-bold`}>âœ“</span>{g}</li>
                ))}
              </ul>
            </div>
            <div className={`${lvlBadge} rounded-lg px-4 py-3 text-center flex-shrink-0`}>
              <div className="text-2xl font-bold">{level.target}</div>
              <div className="text-xs font-semibold">word target</div>
            </div>
          </div>
        </div>

        {/* â”€â”€ PROMPT LIST â”€â”€ */}
        {view==='prompts'&&(
          <div>
            {/* Unit filter */}
            <div className="flex flex-wrap gap-2 mb-4">
              {availableUnits.map(uid=>{
                const u = uid==='all'?{label:'All Topics',emoji:'ğŸ“š'}:UNITS[uid];
                const count = uid==='all'?PROMPTS.filter(p=>p.level===selectedLevel).length
                  :PROMPTS.filter(p=>p.level===selectedLevel&&p.unit===uid).length;
                return (
                  <button key={uid} onClick={()=>setSelectedUnit(uid)}
                    className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold border-2 transition-all ${
                      selectedUnit===uid ? lvlBtn : 'bg-white text-gray-600 border-gray-200 hover:border-gray-400'
                    }`}>
                    <span>{u?.emoji}</span><span>{u?.label}</span>
                    <span className={`ml-1 px-1.5 py-0.5 rounded-full text-xs ${selectedUnit===uid?'bg-white/25':'bg-gray-100'}`}>{count}</span>
                  </button>
                );
              })}
            </div>
            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
              {visiblePrompts.map(p=>(
                <button key={p.id} onClick={()=>selectPrompt(p)}
                  className="text-left bg-white rounded-xl border-2 border-gray-200 hover:border-orange-400 hover:shadow-md transition-all p-4 group">
                  <div className="flex items-start justify-between mb-2">
                    <span className="text-3xl">{p.emoji}</span>
                    <span className="text-xs px-2 py-0.5 rounded-full bg-orange-50 text-orange-600 font-semibold border border-orange-200 text-right leading-tight">
                      {UNITS[p.unit]?.emoji} {UNITS[p.unit]?.label}
                    </span>
                  </div>
                  <div className="font-bold text-gray-800 text-sm group-hover:text-orange-600 transition-colors">{p.title}</div>
                  <div className="text-xs text-gray-500 mt-1 leading-snug">{p.culturalTheme}</div>
                  <div className="mt-3 text-xs text-orange-600 font-semibold">Start writing â†’</div>
                </button>
              ))}
            </div>
            <p className="text-center text-xs text-gray-400 mt-6">
              {PROMPTS.filter(p=>p.level===selectedLevel).length} writing topics Â· Aligned to ACTFL Spanish 1 Curriculum
            </p>
          </div>
        )}

        {/* â”€â”€ WRITE & FEEDBACK â”€â”€ */}
        {(view==='write'||view==='feedback')&&selectedPrompt&&(
          <div className="grid grid-cols-1 lg:grid-cols-5 gap-5">
            {/* Left panel: prompt context */}
            <div className="lg:col-span-2 space-y-4">
              <div className="bg-gradient-to-br from-orange-500 to-red-600 text-white rounded-xl p-4 shadow">
                <div className="flex items-center gap-2 mb-2">
                  <span className="text-2xl">{selectedPrompt.emoji}</span>
                  <div><p className="font-bold text-sm">{selectedPrompt.title}</p>
                    <p className="text-xs text-orange-200">{selectedPrompt.culturalRegion}</p></div>
                </div>
                <p className="text-xs font-bold uppercase tracking-wide text-orange-200 mb-1">ğŸŒ Cultural Context</p>
                <p className="text-xs leading-relaxed text-orange-50">{selectedPrompt.culturalFact}</p>
              </div>
              <div className="bg-white rounded-xl border-2 border-orange-200 p-4">
                <p className="text-xs font-bold text-orange-600 uppercase tracking-wide mb-2">ğŸ“ Your Writing Task</p>
                <p className="text-sm font-semibold text-gray-800">{selectedPrompt.writingTask}</p>
              </div>
              <div className="bg-white rounded-xl border border-gray-200 p-4">
                <p className="text-xs font-bold text-gray-500 uppercase tracking-wide mb-3">ğŸ”‘ Helpful Phrases</p>
                <div className="space-y-2">
                  {selectedPrompt.scaffolding.map((s,i)=>(
                    <div key={i} className="flex justify-between items-start gap-2 py-1 border-b border-gray-100 last:border-0">
                      <code className={`text-xs font-bold ${lvlText} bg-gray-50 rounded px-2 py-0.5 flex-shrink-0`}>{s.phrase}</code>
                      <span className="text-xs text-gray-500 text-right">{s.meaning}</span>
                    </div>
                  ))}
                </div>
              </div>
              <div className="bg-amber-50 border border-amber-300 rounded-xl p-4">
                <p className="text-xs text-gray-700 leading-relaxed">{selectedPrompt.grammarTip}</p>
              </div>
              <div className="bg-white rounded-xl border border-gray-200 p-4">
                <p className="text-xs font-bold text-gray-500 uppercase tracking-wide mb-2">ğŸ’¬ Example Response</p>
                <p className="text-sm italic text-gray-700 leading-relaxed">"{selectedPrompt.example}"</p>
              </div>
            </div>

            {/* Right panel: writing / feedback */}
            <div className="lg:col-span-3 space-y-4">
              {/* Special characters */}
              <div className="bg-white rounded-xl border border-gray-200 p-3">
                <p className="text-xs text-gray-500 font-semibold mb-2">âŒ¨ï¸ Spanish Characters â€” Click to Insert:</p>
                <div className="flex flex-wrap gap-1.5">
                  {SPECIAL_CHARS.map(({c})=>(
                    <button key={c} onClick={()=>insertChar(c)}
                      className={`w-9 h-9 rounded-lg border-2 font-bold text-sm hover:scale-110 transition-transform ${
                        isGreen?'border-green-300 bg-green-50 text-green-800 hover:bg-green-100':'border-teal-300 bg-teal-50 text-teal-800 hover:bg-teal-100'
                      }`}>{c}</button>
                  ))}
                </div>
              </div>

              {/* Writing textarea */}
              {view==='write'&&(
                <div className="bg-white rounded-xl border-2 border-gray-200 overflow-hidden shadow-sm">
                  <div className={`${lvlBg} text-white px-4 py-2 flex justify-between items-center`}>
                    <span className="text-sm font-semibold">Write in Spanish âœï¸</span>
                    <span className={`text-xs px-2 py-0.5 rounded-full bg-white/20 ${wordCount>0&&'font-bold'}`}>
                      {wordCount} {wordCount===1?'word':'words'} Â· Target: {level.target}
                    </span>
                  </div>
                  <textarea
                    ref={taRef} value={writingText} onChange={e=>setWritingText(e.target.value)}
                    placeholder={`Escribe aquÃ­ en espaÃ±olâ€¦\n\nTip: Click the buttons above to insert Ã¡, Ã©, Ã­, Ã³, Ãº, Ã±, Â¿, Â¡`}
                    className="w-full p-4 text-gray-800 text-base resize-none focus:outline-none min-h-48"
                    spellCheck={false} autoCorrect="off" autoCapitalize="off"
                  />
                  <div className="px-4 pb-4 flex justify-between items-center gap-3 flex-wrap">
                    <div className="text-xs text-gray-400 italic min-w-0 truncate">Try: "{level.starters[0]}"</div>
                    <div className="flex gap-2 flex-shrink-0">
                      {writingText.trim()&&(
                        <button onClick={()=>setShowShare(true)}
                          className="px-4 py-2.5 rounded-xl text-sm font-semibold bg-orange-100 text-orange-700 hover:bg-orange-200 transition-colors flex items-center gap-1.5">
                          ğŸ“¤ Share
                        </button>
                      )}
                      <button onClick={getFeedback} disabled={!writingText.trim()||isLoading}
                        className={`px-5 py-2.5 rounded-xl text-white font-bold text-sm transition-all ${
                          !writingText.trim()||isLoading?'bg-gray-300 cursor-not-allowed':`${lvlBg} hover:opacity-90 shadow-md`
                        }`}>
                        {isLoading?(
                          <span className="flex items-center gap-2">
                            <svg className="animate-spin w-4 h-4" fill="none" viewBox="0 0 24 24">
                              <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"/>
                              <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z"/>
                            </svg>Checkingâ€¦
                          </span>
                        ):'âœ¨ Get Feedback'}
                      </button>
                    </div>
                  </div>
                </div>
              )}

              {/* Feedback */}
              {view==='feedback'&&(
                <div className="space-y-4">
                  <div className="bg-white rounded-xl border-2 border-gray-200 p-4">
                    <p className="text-xs font-bold text-gray-500 uppercase tracking-wide mb-2">Your Writing</p>
                    <p className="text-sm text-gray-800 leading-relaxed italic">"{writingText}"</p>
                  </div>

                  {apiError?(
                    <div className="bg-red-50 border border-red-200 rounded-xl p-4 text-sm text-red-700">
                      <p className="font-semibold mb-1">âš ï¸ Oops!</p>
                      <p>{apiError}</p>
                      <button onClick={revise} className="mt-3 text-sm underline text-red-600">â† Go back and try again</button>
                    </div>
                  ):feedback?(
                    <>
                      {feedback.strengths?.length>0&&(
                        <div className="bg-green-50 border-2 border-green-300 rounded-xl p-4">
                          <p className="text-sm font-bold text-green-700 mb-3">ğŸŒŸ What You Did Well</p>
                          <ul className="space-y-2">
                            {feedback.strengths.map((s,i)=>(
                              <li key={i} className="flex gap-2 text-sm text-green-800"><span className="font-bold">âœ“</span>{s}</li>
                            ))}
                          </ul>
                        </div>
                      )}
                      {feedback.improvements?.length>0&&(
                        <div className="bg-blue-50 border-2 border-blue-200 rounded-xl p-4">
                          <p className="text-sm font-bold text-blue-700 mb-3">ğŸ“š One Thing to Improve</p>
                          {feedback.improvements.map((imp,i)=>(
                            <div key={i} className="space-y-2">
                              <p className="text-sm text-blue-800 font-semibold">{imp.issue}</p>
                              {imp.studentText&&(
                                <div className="flex items-center gap-2 flex-wrap">
                                  <span className="text-xs bg-red-100 text-red-700 line-through px-2 py-1 rounded font-mono">{imp.studentText}</span>
                                  <span className="text-gray-400">â†’</span>
                                  <span className="text-xs bg-green-100 text-green-700 px-2 py-1 rounded font-bold font-mono">{imp.correction}</span>
                                </div>
                              )}
                              <p className="text-xs text-gray-600">{imp.explanation}</p>
                            </div>
                          ))}
                        </div>
                      )}
                      {feedback.correctedVersion&&(
                        <div className={`${lvlBgLight} border-2 ${lvlBorder} rounded-xl p-4`}>
                          <p className={`text-xs font-bold ${lvlText} uppercase tracking-wide mb-2`}>âœ… Polished Version</p>
                          <p className="text-sm font-semibold text-gray-800 italic leading-relaxed">"{feedback.correctedVersion}"</p>
                        </div>
                      )}
                      {feedback.culturalNote&&(
                        <div className="bg-orange-50 border border-orange-200 rounded-xl p-3">
                          <p className="text-xs text-orange-700">ğŸŒ <strong>Cultural Connection:</strong> {feedback.culturalNote}</p>
                        </div>
                      )}
                      {feedback.encouragement&&(
                        <div className="bg-yellow-50 border border-yellow-300 rounded-xl p-4 text-center">
                          <p className="text-sm font-semibold text-yellow-800">ğŸ‰ {feedback.encouragement}</p>
                        </div>
                      )}
                      <div className="flex gap-3 flex-wrap">
                        <button onClick={revise} className={`flex-1 py-2.5 rounded-xl text-white font-bold text-sm ${lvlBg} hover:opacity-90 transition-opacity min-w-28`}>âœï¸ Revise</button>
                        <button onClick={()=>setShowShare(true)} className="flex-1 py-2.5 rounded-xl text-white font-bold text-sm bg-gradient-to-r from-orange-500 to-red-500 hover:opacity-90 transition-opacity min-w-36">ğŸ“¤ Share / PDF</button>
                        <button onClick={reset} className="flex-1 py-2.5 rounded-xl text-gray-700 font-bold text-sm bg-white border-2 border-gray-300 hover:bg-gray-50 min-w-28">ğŸ“ New Topic</button>
                      </div>
                    </>
                  ):null}
                </div>
              )}
            </div>
          </div>
        )}
      </div>

      <footer className="text-center py-6 text-xs text-gray-400 mt-8 border-t border-gray-200">
        SeÃ±o Bluemel Taller de Escritura Â· 25 Topics Â· ACTFL Spanish 1 Curriculum Â· Novice Low & Novice Mid
      </footer>
    </div>
  );
}

// â”€â”€ Mount â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App/>);
  </script>
</body>
</html>
